<!-- 下部固定プレーヤー（横幅いっぱい） -->
<div class="fixed-bottom bg-dark text-white px-3 pt-2 pb-3 shadow-lg"
     style="z-index:1050; width:100%; left:0; right:0;">

  <!-- ===== 進捗バー ===== -->
  <div class="d-flex align-items-center mb-3">
    <span id="currentTime" class="small me-2">0:00</span>

    <input type="range"
           id="progress"
           class="form-range flex-grow-1 mx-2"
           min="0" max="100" value="0"
           style="height:6px;">

    <span id="duration" class="small ms-2">0:00</span>
  </div>

  <!-- ===== コントロールボタン ===== -->
  <div class="d-flex justify-content-center align-items-center gap-4">

    <!-- 戻る -->
    <button class="btn btn-outline-light rounded-circle"
            id="rewind3"
            style="width:44px; height:44px;">
      <i class="bi bi-skip-backward-fill"></i>
    </button>

    <!-- 再生 / 一時停止（最重要） -->
    <button class="btn btn-light rounded-circle shadow"
        id="playBtn"
        style="width:64px; height:64px;">
      <i id="playIcon" class="bi bi-play-fill" style="font-size:2.2rem;"></i>
    </button>

    <!-- 進む -->
    <button class="btn btn-outline-light rounded-circle"
            id="forward3"
            style="width:44px; height:44px;">
      <i class="bi bi-skip-forward-fill"></i>
    </button>

    <!-- ループ -->
    <button class="btn btn-outline-light rounded-circle"
            id="loopBtn"
            style="width:40px; height:40px;">
      <i class="bi bi-arrow-repeat"></i>
    </button>

    <!-- 再生速度 -->
    <select id="speedControl"
            class="form-select form-select-sm bg-dark text-white"
            style="width:90px;">
      <% [0.7,0.8,0.9,1,1.1,1.2,1.3,1.4,1.5].each do |s| %>
        <option value="<%= s %>" <%= "selected" if s == 1 %>>
          <%= s %>x
        </option>
      <% end %>
    </select>

  </div>

  <!-- ===== audioタグ（動作用） ===== -->
  <audio id="audio" preload="metadata">
    <source src="/audio_files/<%= @audio.file_name %>" type="audio/mpeg">
    お使いのブラウザはaudioタグをサポートしていません。
  </audio>

</div>
